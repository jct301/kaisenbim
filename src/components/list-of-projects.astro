---
import ButtonLink from "@/components/button-link.astro";
import Card from "@/components/card.astro";
import BriefcaseIcon from "@/components/icons/briefcase.astro";
import Masonry from "@/components/masonry.astro";
import SectionContainer from "@/components/section-container.astro";
import {
  getContents,
  getContentsLimit,
  sortMDByDateContents,
} from "@/services/content";

interface Props {
  limit?: number;
  next: boolean;
}

const { limit, next } = Astro.props;

const allProjects = await getContents({ type: "project" });
const sortProjects = sortMDByDateContents({ contents: allProjects });
const projects = getContentsLimit({ contents: sortProjects, limit });
---

<SectionContainer id="projects" class="mt-16">
  <div class="flex flex-col gap-y-6">
    <div class="flex gap-x-2 font-semibold">
      <BriefcaseIcon />
      <h3 class="text-3xl text-blue-800 dark:text-blue-600 font-semibold">
        Proyectos
      </h3>
    </div>
    <Masonry>
      {projects.map(({ data, slug }) => <Card data={data} slug={slug} />)}
    </Masonry>
    {
      next && (
        <div>
          <ButtonLink url="/projects">Ver m√°s</ButtonLink>
        </div>
      )
    }
  </div>
</SectionContainer>
